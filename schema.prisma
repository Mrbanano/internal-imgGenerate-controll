// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                                String             @id @default(uuid()) @postgresql.Uuid
  name                              String             @default("")
  second_name                       String             @default("")
  lastname                          String             @default("")
  second_lastname                   String             @default("")
  email                             String             @unique @default("")
  phone                             String             @default("")
  gender                            String?
  reference                         UserReferenceType?
  country                           String             @default("")
  state                             String             @default("")
  city                              String             @default("")
  password                          String
  birthDate                         String             @default("")
  onBoardingStep                    Int                @default(0)
  createdAt                         DateTime?          @default(now())
  rol                               UserRolType?       @default(user)
  registerDevice                    String             @default("")
  customerId                        String             @unique @default("")
  from_GenerationRecord_generatedBy GenerationRecord[] @relation("GenerationRecord_generatedBy")
  from_Balance_user                 Balance[]          @relation("Balance_user")
}

model GenerationRecord {
  id            String    @id @default(uuid()) @postgresql.Uuid
  generationID  String    @unique @default("")
  generatedBy   User?     @relation("GenerationRecord_generatedBy", fields: [generatedById], references: [id])
  generatedById String?   @map("generatedBy") @postgresql.Uuid
  prompt        String    @default("")
  promptEnglish String    @default("")
  modelId       String    @default("")
  generation    String    @default("")
  status        String?   @default("En proceso")
  apiCreditCost Float
  witdth        Int?
  height        Int?
  updatedAt     DateTime?
  createdAt     DateTime? @default(now())

  @@index([generatedById])
}

model Balance {
  id        String    @id @default(uuid()) @postgresql.Uuid
  user      User?     @relation("Balance_user", fields: [userId], references: [id])
  userId    String?   @map("user") @postgresql.Uuid
  balance   Int       @default(0)
  updatedAt DateTime?
  createdAt DateTime  @default("2024-06-14T04:30:45.978Z")

  @@index([userId])
}

enum UserReferenceType {
  facebook
  linkedIn
  instagram
  twitter
  google
  friend
  otro
}

enum UserRolType {
  admin
  user
  moderator
}
